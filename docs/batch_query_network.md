# 网络往返次数对比

## 循环查询（当前实现）
```
应用服务器                    数据库服务器
    |                              |
    |------ 查询 group_1 -------->|
    |<----- 返回结果 -------------|
    |                              |
    |------ 查询 group_2 -------->|
    |<----- 返回结果 -------------|
    |                              |
    |------ 查询 group_3 -------->|
    |<----- 返回结果 -------------|
    |                              |
    ... 重复 20 次 ...
    |                              |
    总耗时 = 20 * (网络延迟 + 查询时间)
```

**问题**：
- 每次查询都需要建立连接、发送请求、等待响应
- 网络延迟累加：20 次 * 5ms = 100ms（仅网络延迟）
- 数据库连接开销累加

---

## 批量查询
```
应用服务器                    数据库服务器
    |                              |
    |-- 批量查询 20 个群 -------->|
    |<-- 一次性返回 20 条结果 ----|
    |                              |
    总耗时 = 1 * (网络延迟 + 查询时间)
```

**优势**：
- 只需要 1 次网络往返
- 网络延迟：1 次 * 5ms = 5ms
- 数据库连接开销：1 次
