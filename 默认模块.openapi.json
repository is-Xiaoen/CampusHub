{
  "openapi": "3.0.1",
  "info": {
    "title": "默认模块",
    "description": "CampusHub 学生认证模块接口定义",
    "version": "2.0.0"
  },
  "tags": [
    {
      "name": "学生认证"
    }
  ],
  "paths": {
    "/api/v1/verify/student/apply": {
      "post": {
        "summary": "提交学生认证申请",
        "deprecated": false,
        "description": "用户填写基本信息并上传学生证正面/详情面照片，发起学生身份认证申请。\n\n流程：Handler 校验文件 → 上传图片到七牛云 → 调用认证 RPC 提交申请。\n\n文件限制：整个表单最大 10MB，单个文件最大 5MB，仅支持 jpg/jpeg/png。",
        "operationId": "ApplyVerify",
        "tags": [
          "学生认证"
        ],
        "parameters": [],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "real_name": {
                    "type": "string",
                    "description": "姓名"
                  },
                  "school_name": {
                    "type": "string",
                    "description": "学校名称"
                  },
                  "student_id": {
                    "type": "string",
                    "description": "学号"
                  },
                  "department": {
                    "type": "string",
                    "description": "院系"
                  },
                  "admission_year": {
                    "type": "string",
                    "description": "入学年份"
                  },
                  "front_image": {
                    "type": "string",
                    "format": "binary",
                    "description": "学生证正面照片（jpg/jpeg/png，最大5MB）"
                  },
                  "back_image": {
                    "type": "string",
                    "format": "binary",
                    "description": "学生证详情面照片（jpg/jpeg/png，最大5MB）"
                  }
                },
                "required": [
                  "real_name",
                  "school_name",
                  "student_id",
                  "department",
                  "admission_year",
                  "front_image",
                  "back_image"
                ]
              },
              "example": {
                "real_name": "张三",
                "school_name": "某某大学",
                "student_id": "2020123456",
                "department": "计算机学院",
                "admission_year": "2020"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "code": {
                      "type": "integer",
                      "description": "业务状态码，0=成功",
                      "example": 0
                    },
                    "message": {
                      "type": "string",
                      "description": "提示信息",
                      "example": "success"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "verify_id": {
                          "type": "integer",
                          "format": "int64",
                          "description": "认证申请ID",
                          "example": 10001
                        },
                        "status": {
                          "type": "integer",
                          "description": "当前状态码（1=OCR审核中）",
                          "example": 1
                        },
                        "status_desc": {
                          "type": "string",
                          "description": "状态描述",
                          "example": "OCR审核中"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time",
                          "description": "申请时间（RFC3339）",
                          "example": "2026-01-29T10:30:00+08:00"
                        }
                      }
                    }
                  }
                },
                "examples": {
                  "1": {
                    "summary": "成功示例",
                    "value": {
                      "code": 0,
                      "message": "success",
                      "data": {
                        "verify_id": 10001,
                        "status": 1,
                        "status_desc": "OCR审核中",
                        "created_at": "2026-01-29T10:30:00+08:00"
                      }
                    }
                  },
                  "2": {
                    "summary": "参数校验失败",
                    "value": {
                      "code": 1001,
                      "message": "参数解析失败"
                    }
                  },
                  "3": {
                    "summary": "未授权访问",
                    "value": {
                      "code": 1002,
                      "message": "未授权访问"
                    }
                  },
                  "4": {
                    "summary": "学号已被认证",
                    "value": {
                      "code": 2204,
                      "message": "该学号已被其他用户认证"
                    }
                  },
                  "5": {
                    "summary": "当前状态不允许申请",
                    "value": {
                      "code": 2205,
                      "message": "当前状态不允许申请认证"
                    }
                  },
                  "6": {
                    "summary": "申请过于频繁",
                    "value": {
                      "code": 2208,
                      "message": "申请过于频繁，请20秒后再试"
                    }
                  },
                  "7": {
                    "summary": "拒绝后冷却期",
                    "value": {
                      "code": 2211,
                      "message": "您的认证申请被拒绝后24小时内不能重新申请"
                    }
                  },
                  "8": {
                    "summary": "图片格式不支持",
                    "value": {
                      "code": 2212,
                      "message": "图片格式不支持，仅支持 jpg/jpeg/png"
                    }
                  },
                  "9": {
                    "summary": "图片大小超出限制",
                    "value": {
                      "code": 2213,
                      "message": "图片大小超出限制（最大5MB）"
                    }
                  },
                  "10": {
                    "summary": "正面照片缺失",
                    "value": {
                      "code": 2214,
                      "message": "请上传学生证正面照片"
                    }
                  },
                  "11": {
                    "summary": "详情面照片缺失",
                    "value": {
                      "code": 2215,
                      "message": "请上传学生证详情面照片"
                    }
                  }
                }
              }
            },
            "headers": {}
          }
        },
        "security": [
          {
            "BearerAuth": []
          }
        ]
      }
    }
  },
  "components": {
    "schemas": {},
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT AccessToken 认证"
      }
    }
  },
  "servers": [],
  "security": []
}