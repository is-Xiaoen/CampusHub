# ============================================================================
# Gateway API 配置模板
# ============================================================================
# 使用方法：复制此文件为 gateway.yaml，然后修改相应配置
# cp gateway.yaml.example gateway.yaml
# ============================================================================

Name: gateway-api
Host: 0.0.0.0
Port: 18080    # 使用高端口避免冲突

# 日志配置
Log:
  ServiceName: gateway-api
  Mode: console          # console | file
  Encoding: plain        # plain | json
  Level: info            # debug | info | warn | error
  Path: ./logs

# JWT 认证配置
Auth:
  AccessSecret: <YOUR_JWT_SECRET_KEY_32_CHARS>  # 修改为随机字符串
  AccessExpire: 7200                            # Token 过期时间（秒）

# ==================== RPC 服务发现 ====================
UserRpc:
  Etcd:
    Hosts:
      - <ETCD_HOST>:2379    # 例如: 192.168.10.4:2379
    Key: user.rpc
  NonBlock: true
  Timeout: 3000

ActivityRpc:
  Etcd:
    Hosts:
      - <ETCD_HOST>:2379
    Key: activity.rpc
  NonBlock: true
  Timeout: 3000

ChatRpc:
  Etcd:
    Hosts:
      - <ETCD_HOST>:2379
    Key: chat.rpc
  NonBlock: true
  Timeout: 3000

# CORS 跨域配置
Cors:
  AllowOrigins:
    - "*"
  AllowMethods:
    - GET
    - POST
    - PUT
    - DELETE
    - OPTIONS
  AllowHeaders:
    - "*"

# 限流配置
RateLimit:
  Rate: 100     # 每秒请求数
  Burst: 200    # 突发容量

# 链路追踪（可选，需要 Jaeger 服务）
# Telemetry:
#   Name: gateway-api
#   Endpoint: http://<JAEGER_HOST>:14268/api/traces
#   Sampler: 1.0
#   Batcher: jaeger
