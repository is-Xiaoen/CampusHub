# ============================================================================
# User MQ 消费者服务配置（基于 Watermill Redis Stream）
# ============================================================================
#
# 启动命令: go run user_mq.go -f etc/user-mq.yaml
#
# ============================================================================

Name: user-mq
Mode: dev

# 日志配置
Log:
  ServiceName: user-mq
  Mode: console
  Encoding: plain
  Level: info
  Path: ./logs

# 数据库配置
MySQL:
  DataSource: root:123456@tcp(192.168.10.4:3308)/campushub_user?charset=utf8mb4&parseTime=true&loc=Local

# Redis 配置（用于缓存操作）
BizRedis:
  Host: 192.168.10.4:6379
  Type: node
  Pass: "123456"

# ==================== 消息中间件配置（Watermill）====================
# 复用 common/messaging 库
Messaging:
  # Redis 连接配置（用于 Stream）
  Redis:
    Addr: "192.168.10.4:6379"
    Password: "123456"
    DB: 0

  # 订阅的主题（Stream Key）
  Topic: "credit:events"

  # 消费者组名称
  ConsumerGroup: "user-mq-group"

  # 是否启用 Prometheus 指标
  EnableMetrics: true

  # 是否启用 Go-Zero trace_id 传播
  EnableGoZero: true

  # 重试配置
  Retry:
    MaxRetries: 3
    InitialInterval: 100ms
    MaxInterval: 10s
    Multiplier: 2.0
