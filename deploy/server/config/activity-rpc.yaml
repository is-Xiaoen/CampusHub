# ============================================================================
# 活动服务 RPC 配置 - 生产环境
# ============================================================================
#
# 部署位置: /opt/campushub/config/activity-rpc.yaml
#
# ============================================================================

Name: activity.rpc
ListenOn: 0.0.0.0:9002

# ==================== 服务注册 ====================
Etcd:
  Hosts:
    - 192.168.10.4:2379
  Key: activity.rpc

# 日志配置
Log:
  ServiceName: activity-rpc
  Mode: file
  Encoding: json
  Level: info
  Path: /opt/campushub/logs

# MySQL 配置
MySQL:
  Host: 192.168.10.4
  Port: 3308
  Username: root
  Password: "123456"
  Database: campushub_main
  MaxOpenConns: 100
  MaxIdleConns: 10
  ConnMaxLifetime: 3600

BizRedis:
  Host: 192.168.10.4:6379
  Pass: "123456"
  Type: node

# ==================== RPC 客户端配置 ====================
UserRpc:
  Etcd:
    Hosts:
      - 192.168.10.4:2379
    Key: user.rpc
  NonBlock: true
  Timeout: 3000

# ==================== DTM 分布式事务配置 ====================
# 启用后创建活动将使用 SAGA 模式保证跨服务一致性
DTM:
  Enabled: true
  Server: "192.168.10.4:36790"
  HTTPServer: "192.168.10.4:36789"
  Timeout: 120
  ActivityRpcURL: "192.168.10.9:9002"
  UserRpcURL: "192.168.10.9:9001"

# ==================== 链路追踪 ====================
Telemetry:
  Name: activity-rpc
  Endpoint: http://192.168.10.4:14268/api/traces
  Sampler: 1.0
  Batcher: jaeger
